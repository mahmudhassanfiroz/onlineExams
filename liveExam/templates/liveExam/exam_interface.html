
{% extends 'base.html' %}

{% block content %}
<h1>{{ exam.title }}</h1>
<div id="timer"></div>
<form id="exam-form" method="post">
    {% csrf_token %}
    {% for question in questions %}
    <div class="question">
        <h3>প্রশ্ন {{ forloop.counter }}/{{ questions|length }}</h3>
        <p>{{ question.text }}</p>
        {% for option in question.options.all %}
        <label>
            <input type="radio" name="q{{ question.id }}" value="{{ option.id }}">
            {{ option.text }}
        </label>
        {% endfor %}
    </div>
    {% endfor %}
    <button type="submit">জমা দিন</button>
</form>
{% endblock %}

{% block extra_js %}
<script>
    const examDuration = {{ exam.duration.total_seconds }};
    let timeLeft = examDuration;

    function updateTimer() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById('timer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        if (timeLeft > 0) {
            timeLeft--;
            setTimeout(updateTimer, 1000);
        } else {
            document.getElementById('exam-form').submit();
        }
    }

    updateTimer();
</script>
{% endblock %}

